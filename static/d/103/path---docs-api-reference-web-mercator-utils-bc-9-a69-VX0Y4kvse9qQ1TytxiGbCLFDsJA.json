{"data":{"docBySlug":{"html":"<h1 id=\"web-mercator-utility-functions\"><a href=\"#web-mercator-utility-functions\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web Mercator Utility Functions</h1>\n<h3 id=\"code-classlanguage-textlnglattoworldlnglat-scalecode\"><a href=\"#code-classlanguage-textlnglattoworldlnglat-scalecode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">lngLatToWorld(lngLat, scale)</code></h3>\n<p>Project a coordinate on sphere onto the Web Mercator coordinate system at a given zoom level.</p>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">lngLat</code> (Array, required) - Specifies a point on the sphere to project. <code class=\"language-text\">[lng,lat]</code> in degrees.</li>\n<li><code class=\"language-text\">scale</code> (Number, required) - Scale of the projection.</li>\n</ul>\n<p>Returns:</p>\n<ul>\n<li><code class=\"language-text\">[x, y]</code></li>\n</ul>\n<h3 id=\"code-classlanguage-textworldtolnglatxy-scalecode\"><a href=\"#code-classlanguage-textworldtolnglatxy-scalecode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">worldToLngLat(xy, scale)</code></h3>\n<p>Unproject a coordinate from the Web Mercator coordinate system back to the sphere at a given zoom level.</p>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">xy</code> (Array, required) - Specifies a point on the Web Mercator tile to unproject. <code class=\"language-text\">[x, y]</code> in pixels.</li>\n<li><code class=\"language-text\">scale</code> (Number, required) - Scale of the projection.</li>\n</ul>\n<p>Returns:</p>\n<ul>\n<li><code class=\"language-text\">[lng, lat]</code></li>\n</ul>\n<h3 id=\"code-classlanguage-textworldtopixelsxyz-projectionmatrixcode\"><a href=\"#code-classlanguage-textworldtopixelsxyz-projectionmatrixcode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">worldToPixels(xyz, projectionMatrix)</code></h3>\n<p>Project a coordinate from the Web Mercator coordinate system to screen.</p>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">xyz</code> (Array, required) - Specifies a point in the Web Mercator tile. <code class=\"language-text\">z</code> is the elevation and optional.</li>\n<li><code class=\"language-text\">projectionMatrix</code> (Matrix4, required) - The projection matrix.</li>\n</ul>\n<p>Returns:</p>\n<ul>\n<li><code class=\"language-text\">[x, y, z]</code> - coordinates on screen, <code class=\"language-text\">z</code> is the pixel depth.</li>\n</ul>\n<h3 id=\"code-classlanguage-textpixelstoworldxyz-unprojectionmatrix-targetzcode\"><a href=\"#code-classlanguage-textpixelstoworldxyz-unprojectionmatrix-targetzcode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">pixelsToWorld(xyz, unprojectionMatrix, targetZ)</code></h3>\n<p>Project a coordinate from screen to the Web Mercator coordinate system.</p>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">xyz</code> (Array, required) - Specifies a point on screen. <code class=\"language-text\">z</code> is the pixel depth and optional.</li>\n<li><code class=\"language-text\">unprojectionMatrix</code> (Matrix4, required) - The unprojection matrix.</li>\n<li><code class=\"language-text\">targetZ</code> (Number, optional) - If pixel depth is not specified, <code class=\"language-text\">targetZ</code> is used as the elevation plane to unproject onto. Default <code class=\"language-text\">0</code>.</li>\n</ul>\n<p>Returns:</p>\n<ul>\n<li><code class=\"language-text\">[x, y, z]</code> - coordinates on the Web Mercator tile, <code class=\"language-text\">z</code> is the elevation.</li>\n</ul>\n<h3 id=\"code-classlanguage-textgetmeterzoomviewportcode\"><a href=\"#code-classlanguage-textgetmeterzoomviewportcode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">getMeterZoom(viewport)</code></h3>\n<p>Returns the zoom level that gives a 1 meter pixel at a certain latitude.</p>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">viewport</code> (Object) - viewport props</li>\n<li><code class=\"language-text\">viewport.latitude</code> (Number, required)</li>\n</ul>\n<h3 id=\"code-classlanguage-textgetdistancescalesviewportcode\"><a href=\"#code-classlanguage-textgetdistancescalesviewportcode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">getDistanceScales(viewport)</code></h3>\n<p>Calculate linear scales for quick conversion between meters/degrees/pixels distances around the given lat/lon.</p>\n<p>In mercator projection mode, the distance scales vary significantly with latitude. The scale is only reasonably accurate locally.</p>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">viewport</code> (Object) - viewport props</li>\n<li><code class=\"language-text\">viewport.longitude</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.latitude</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.zoom</code> (Number, optional)</li>\n<li><code class=\"language-text\">viewport.scale</code> (Number, optional) - must supply if zoom is not specified</li>\n<li><code class=\"language-text\">viewport.highPrecision</code> (bool, optional) - default <code class=\"language-text\">false</code></li>\n</ul>\n<p>Returns:</p>\n<ul>\n<li><code class=\"language-text\">distanceScales</code> (Object)</li>\n<li><code class=\"language-text\">distanceScales.pixelsPerMeter</code> (Array) - pixels per meter in <code class=\"language-text\">[x, y, z]</code>.</li>\n<li><code class=\"language-text\">distanceScales.metersPerPixel</code> (Array) - meters per pixel in <code class=\"language-text\">[x, y, z]</code></li>\n<li><code class=\"language-text\">distanceScales.pixelsPerDegree</code> (Array) - pixels per degree in <code class=\"language-text\">[x, y, z]</code></li>\n<li><code class=\"language-text\">distanceScales.degreesPerPixel</code> (Array) - degree per pixel in <code class=\"language-text\">[x, y, z]</code></li>\n<li><code class=\"language-text\">distanceScales.pixelsPerMeter2</code> (Array) - if <code class=\"language-text\">highPrecision</code> is <code class=\"language-text\">true</code>, returns pixels per meter adjustment in <code class=\"language-text\">[x2, y2, z2]</code>. It offers a cheap way to compensate for the precision loss with latitude. Amends <code class=\"language-text\">pixelsPerMeter</code> by y offset (in meters): <code class=\"language-text\">[x + x2 * dy, y + y2 * dy, z + z2 * dy]</code>.</li>\n<li><code class=\"language-text\">distanceScales.pixelsPerDegree2</code> (Array) - if <code class=\"language-text\">highPrecision</code> is <code class=\"language-text\">true</code>, returns pixels per degree adjustment in <code class=\"language-text\">[x2, y2, z2]</code>. It offers a cheap way to compensate for the precision loss with latitude. Amends <code class=\"language-text\">pixelsPerDegree</code> by y offset (in degrees): <code class=\"language-text\">[x + x2 * dy, y + y2 * dy, z + z2 * dy]</code>.</li>\n</ul>\n<h3 id=\"code-classlanguage-textaddmeterstolnglatlnglatz-xyzcode\"><a href=\"#code-classlanguage-textaddmeterstolnglatlnglatz-xyzcode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">addMetersToLngLat(lngLatZ, xyz)</code></h3>\n<p>Offset a spherical position by meters.</p>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">lngLatZ</code> (Array) - origin in <code class=\"language-text\">[lng, lat, alt]</code>. Altitude is optional.</li>\n<li><code class=\"language-text\">xyz</code> (Array) - offset from the origin <code class=\"language-text\">[x, y, z]</code> in meters. <code class=\"language-text\">x</code> is easting and <code class=\"language-text\">y</code> is northing. <code class=\"language-text\">z</code> is optional.</li>\n</ul>\n<p>Returns:</p>\n<ul>\n<li><code class=\"language-text\">[lng, lat]</code> if the third component in neither argument is specified, or</li>\n<li><code class=\"language-text\">[lng, lat, alt]</code> otherwise.</li>\n</ul>\n<h3 id=\"code-classlanguage-textgetviewmatrixviewportcode\"><a href=\"#code-classlanguage-textgetviewmatrixviewportcode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">getViewMatrix(viewport)</code></h3>\n<p>Get a transform matrix that projects from the mercator (pixel) space into the camera (view) space. Centers the map at the given coordinates.</p>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">viewport</code> (Object) - viewport props</li>\n<li><code class=\"language-text\">viewport.height</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.pitch</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.bearing</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.altitude</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.flipY</code> (Boolean, optional) - Whether the returned matrix should flip y. Default <code class=\"language-text\">true</code> (latitude and screen y increase in opposite directions).</li>\n<li><code class=\"language-text\">viewport.center</code> (Array, optional) - pre-calculated world position of map center using <code class=\"language-text\">getWorldPosition</code>. Default <code class=\"language-text\">[0, 0]</code>.</li>\n</ul>\n<p>Returns:</p>\n<ul>\n<li><code class=\"language-text\">viewMatrix</code> (Array) 4x4 matrix.</li>\n</ul>\n<h3 id=\"code-classlanguage-textgetprojectionmatrixviewportcode\"><a href=\"#code-classlanguage-textgetprojectionmatrixviewportcode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">getProjectionMatrix(viewport)</code></h3>\n<p>Get a transform matrix that projects from camera (view) space to clipspace.</p>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">viewport</code> (Object) - viewport props</li>\n<li><code class=\"language-text\">viewport.width</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.height</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.pitch</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.altitude</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.nearZMultiplier</code> (Number, optional) - near plane multiplier. Default <code class=\"language-text\">1</code>.</li>\n<li><code class=\"language-text\">viewport.farZMultiplier</code> (Number, optional) - far plane multiplier. Default <code class=\"language-text\">1</code></li>\n</ul>\n<p>Notes:</p>\n<p>To match Mapbox's z-buffer, use these parameters:</p>\n<ul>\n<li>\n<p>Before 0.29:</p>\n<ul>\n<li><code class=\"language-text\">nearZMultiplier</code>: <code class=\"language-text\">0.1</code></li>\n<li><code class=\"language-text\">farZMultiplier</code>: <code class=\"language-text\">1</code></li>\n</ul>\n</li>\n<li>\n<p>Starting 0.29:</p>\n<ul>\n<li><code class=\"language-text\">nearZMultiplier</code>: <code class=\"language-text\">1 / viewport.height</code></li>\n<li><code class=\"language-text\">farZMultiplier</code>: <code class=\"language-text\">1.01</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"code-classlanguage-textgetprojectionparameterswidth-height-altitude-pitch-farzmultipliercode\"><a href=\"#code-classlanguage-textgetprojectionparameterswidth-height-altitude-pitch-farzmultipliercode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">getProjectionParameters({width, height, altitude, pitch, farZMultiplier}})</code></h3>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">width</code> (Number, required)</li>\n<li><code class=\"language-text\">height</code> (Number, required)</li>\n<li><code class=\"language-text\">pitch</code> (Number, required)</li>\n<li><code class=\"language-text\">altitude</code> (Number, required)</li>\n<li><code class=\"language-text\">farZMultiplier</code> (Number, optional) - near plane multiplier. Default <code class=\"language-text\">1</code>.</li>\n<li><code class=\"language-text\">farZMultiplier</code> (Number, optional) - far plane multiplier. Default <code class=\"language-text\">1</code>.</li>\n</ul>\n<p>Returns</p>\n<ul>\n<li>Object with <code class=\"language-text\">{fovy, aspect, focalDistance, near, far}</code> fields.</li>\n</ul>\n<h3 id=\"code-classlanguage-textfitboundsoptscode\"><a href=\"#code-classlanguage-textfitboundsoptscode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">fitBounds(opts)</code></h3>\n<p>Returns map settings (longitude, latitude and zoom) that will contain the provided corners within the provided dimensions. Only supports non-perspective mode.</p>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">opts</code> (Object) - options</li>\n<li><code class=\"language-text\">opts.width</code> (Number, required)</li>\n<li><code class=\"language-text\">opts.height</code> (Number, required)</li>\n<li><code class=\"language-text\">opts.bounds</code> (Array, required) - opposite corners specified as <code class=\"language-text\">[[lon, lat], [lon, lat]]</code></li>\n<li><code class=\"language-text\">opts.padding</code> (Number, optional) - the amount of padding in pixels to add to the given bounds. Default <code class=\"language-text\">0</code>.</li>\n<li><code class=\"language-text\">opts.offset</code> (Array, optional) - the center of the given bounds relative to the map's center, <code class=\"language-text\">[x, y]</code> measured in pixels.</li>\n</ul>\n<p>Returns:</p>\n<ul>\n<li><code class=\"language-text\">{longitude, latitude, zoom}</code></li>\n</ul>\n<h3 id=\"code-classlanguage-textnormalizeviewportpropsviewportcode\"><a href=\"#code-classlanguage-textnormalizeviewportpropsviewportcode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">normalizeViewportProps(viewport)</code></h3>\n<p>This will adjust the map center and zoom so that the projected map fits into the target viewport size without white gaps.</p>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">viewport</code> (Object)</li>\n<li><code class=\"language-text\">viewport.width</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.height</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.longitude</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.latitude</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.zoom</code> (Number, required)</li>\n<li><code class=\"language-text\">viewport.pitch</code> (Number, optional)</li>\n</ul>\n<p>Returns:</p>\n<ul>\n<li><code class=\"language-text\">viewport</code> - normalized <code class=\"language-text\">{width, height, longitude, latitude, zoom, pitch, bearing}</code></li>\n</ul>\n<h3 id=\"code-classlanguage-textflytoviewportstartprops-endprops-tcode\"><a href=\"#code-classlanguage-textflytoviewportstartprops-endprops-tcode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">flyToViewport(startProps, endProps, t)</code></h3>\n<p>While flying from one viewport to another, returns in-transition viewport props at a given time. This util function implements the algorithm described in “Smooth and efficient zooming and panning.” by Jarke J. van Wijk and Wim A.A. Nuij.</p>\n<p>Parameters:</p>\n<ul>\n<li><code class=\"language-text\">startProps</code> (Object) - viewport to fly from</li>\n<li><code class=\"language-text\">startProps.width</code> (Number, required)</li>\n<li><code class=\"language-text\">startProps.height</code> (Number, required)</li>\n<li><code class=\"language-text\">startProps.longitude</code> (Number, required)</li>\n<li><code class=\"language-text\">startProps.latitude</code> (Number, required)</li>\n<li><code class=\"language-text\">startProps.zoom</code> (Number, required)</li>\n<li><code class=\"language-text\">endProps</code> (Object) - viewport to fly from</li>\n<li><code class=\"language-text\">endProps.longitude</code> (Number, required)</li>\n<li><code class=\"language-text\">endProps.latitude</code> (Number, required)</li>\n<li><code class=\"language-text\">endProps.zoom</code> (Number, required)</li>\n<li><code class=\"language-text\">t</code> (Number) - a time factor between 0 and 1. <code class=\"language-text\">0</code> indicates the start of the transition, <code class=\"language-text\">1</code> indicates the end of the transition.</li>\n</ul>\n<p>Returns:</p>\n<ul>\n<li><code class=\"language-text\">{longitude, latitude, zoom}</code></li>\n</ul>","timeToRead":7,"excerpt":"Web Mercator Utility Functions Project a coordinate on sphere onto the Web Mercator coordinate system at a given zoom level. Parameters…","frontmatter":{"title":"Web Mercator Utility Functions","cover":"cover","category":"docs","tags":["default"]}}},"pageContext":{"relativeLinks":{"../../README.md":"/docs","docs/README.md":"/docs","../..":"/docs","docs":"/docs","../../whats-new.md":"/docs/whats-new","docs/whats-new.md":"/docs/whats-new","../../whats-new":"/docs/whats-new","docs/whats-new":"/docs/whats-new","../../articles/coordinates.md":"/docs/articles/coordinates","docs/articles/coordinates.md":"/docs/articles/coordinates","../../articles/coordinates":"/docs/articles/coordinates","docs/articles/coordinates":"/docs/articles/coordinates","../../articles/offset-accuracy.md":"/docs/articles/offset-accuracy","docs/articles/offset-accuracy.md":"/docs/articles/offset-accuracy","../../articles/offset-accuracy":"/docs/articles/offset-accuracy","docs/articles/offset-accuracy":"/docs/articles/offset-accuracy","":"/docs/api-reference/web-mercator-utils","docs/api-reference/web-mercator-utils.md":"/docs/api-reference/web-mercator-utils","docs/api-reference/web-mercator-utils":"/docs/api-reference/web-mercator-utils","../web-mercator-viewport.md":"/docs/api-reference/web-mercator-viewport","docs/api-reference/web-mercator-viewport.md":"/docs/api-reference/web-mercator-viewport","../web-mercator-viewport":"/docs/api-reference/web-mercator-viewport","docs/api-reference/web-mercator-viewport":"/docs/api-reference/web-mercator-viewport","../../get-started/README.md":"/docs/get-started","docs/get-started/README.md":"/docs/get-started","../../get-started":"/docs/get-started","docs/get-started":"/docs/get-started"},"slug":"docs/api-reference/web-mercator-utils","toc":"docs"}}